# EZworkEra
Utility For using UpdateEra(Not Mine) - Translated Eramaker base game's update tool

## readme ver 3.0 2019.11.13
이 파일은 EZworkEra의 readme 파일로, 현재 존재하는 툴의 기능을 설명하고 있습니다.  

# 개요
기본적으로 이 툴의 목적은 이미 손/기계번역된 파일이 존재하는 era를, 이후 원본 era의 업데이트시 srs를 활용해 상대적으로 원활하게 통합할 수 있도록 도움을 주는 목적으로 제작되고 있습니다.  
이 툴은 ver 3.0 현재 eraTW의 파일구조를 참고하여 만들어졌습니다. 타 era에서의 구동을 보장할 수 없습니다.  
이 툴은 ver 3.0 현재 python 3.8.0을 기반으로 작성되고 있습니다. C 계열이던 Java 계열이던 다른 언어는 아예 만질 줄 모릅니다.  
현재 개발/수정중인 코드, 그리고 이전 릴리즈 코드는 소스코드 디렉토리 내에 동봉되어 있습니다.  
UpdateEra의 구조는 전혀 모르지만, srs의 사용에 조금이나마 도움이 될 수 있도록 구성하고자 합니다.  
srs의 구조에 대해 아시는 분의 많은 도움 부탁드립니다.  
현재 미천한 프로그래밍 실력으로 최대한 노력하고 있사오니, 능력자분의 많은 도움 부탁드립니다.  

# 각 툴의 사용 방법에 관해
사용 방법의 경우 github의 위키에 기술하는 것을 우선적인 목표로 하고 있습니다만, 시간이 될 경우 이곳에도 추가로 기재할 예정입니다.  
또한, 현재 버전의 유틸은 이전과는 달리 기능을 각 모듈별로 나눈 후 main을 통해 기능을 합친 뒤 이를 패키징하여 배포하고 있어 실행 파일이 파편화되어있지 않으니 이 점 유의해주세요.  
## main.py - (EZworkEra 메인 모듈)
현재 main.py는 패키징하여 깃허브에 릴리즈시 해당 버전에 맞는 이름으로 바꾸어 올리고 있습니다. zip 패키징을 통해 필요한 파일들을 같이 올리는 경우에는 main.exe가 실행 파일이빈다.  
예시:
> EZworkEra_3b.exe  
해당 실행파일을 구동시 메인메뉴가 출력되고, 여기에서 필요한 기능을 골라 실행해주시면 됩니다.  
* CSV 관련 기능
  1. csv 변수 출력 기능
선택한 폴더 내의 csv를 크롤링한 후 각 csv 파일 내에 선언되어 있는 모든 항목을 불러옵니다.  
불러온 자료는 python의 dictionary형으로 저장되고, 이를 외부 파일로 sav 폴더에 저장할 수 있습니다.  
예시: '{csv\str.csv: {1:토리이,2:경내,...}}'
* ERB 관련 기능
  1. 사용된 CSV 변수 추출  
  동봉된 CSVfnclist.csv를 참조해 해당 함수명을 불러온 후, 선택한 폴더의 모든 erb 내 해당 함수명이 있는 부분을 검색한 뒤 어떤 csv 파일이 사용되었는지를 출력합니다. v3.0.0 현재 보수공사중입니다.  
  추가로 검색하려는 erb 파일이 많을수록 시간이 오래 소모됩니다.
  2. 구상 추출
  선택한 폴더 내의 모든 erb를 검색하며 PRINT, DATAFORM 계열, 즉 인게임상에서 출력되는 텍스트만을 출력합니다. v3.0.0 현재 보수공사중입니다.
  3. 들여쓰기 교정
  선택한 폴더 내의 erb를 크롤링해 구조화한 뒤 IF 구문과 CASE 구문, DATALIST 구문을 바탕으로 들여쓰기를 교정해 출력합니다. 해당 과정에서 외부 파일로 크롤링한 erb 파일의 처리결과를 파이썬 자료형으로 sav 폴더에 저장할 수 있습니다.
  자료 결과물 원문 예시:  
  '''
  IF LOCAL
  IF TARGET:ARG:1
  PRINTFORMW 테스트입니다.
  ELSE
  PRINTFORML TEST입니다.
  ENDIF
  ENDIF
  '''  
  자료 결과물 자료형 예시:  
  '''python3
  [[0,0,0,'IF LOCAL'],[1,0,0,'IF TARGET:ARG:1'],[2,0,0,'PRINTFORMW 테스트입니다'],[1,0,0,'ELSE'][2,0,0,'TEST입니다'],[1,0,0,'ENDIF'],[0,0,0,'ENDIF']'''  

* ERH 관련 기능
아직 껍데기만 있습니다.  
* 결과물 처리 기능
이 툴로 생성했던 자료나 이를 외부 파일로 저장한 것을 불러와 아래의 양식에 맞게 출력해줍니다. 결과물은 기본적으로 실행 파일이 있는 폴더의 ResultFiles 폴더에 저장됩니다.  
  1. TXT 출력 기능
  생성된 자료를 TXT 파일로 출력합니다.
  2. ERB 출력 기능
  생성된 자료를 ERB 파일로 출력합니다. 기능적으로는 TXT 파일 출력과 동일하나 확장자를 자동으로 바꿔줍니다.
  3. SRS 출력 기능
  생성된 자료 두 개를 합쳐 SRS 파일로 출력합니다. 현재 CSV 변수 출력 기능으로 생성된 자료형에 대응하여 설계되어 있으며, 두 자료의 합이 맞지 않으면 SRS 파일 내와 srsdebug.log 파일에 관련 내용이 기록됩니다.

# 오류, 개선 등 보고 관련하여
텍마갤 눈팅족으로도 있기는 하지만 참치넷 쪽이 보기 편합니다. github로도 현재 보고 가능합니다.  
github 주소 : https://github.com/SecretU4/EZworkEra/issues  

# 작성 로그
## ver 1.0
'chara CSV 이름추출', 'CSV 이름 srs 변환 구동'의 설명 작성  
readme 파일 작성  
## ver 2.0
'chara CSV 이름추출', 'CSV 이름 srs 변환 구동' 설명 및 패키지 파일 제거  
  * 해당 툴들의 소스코드는 소스코드 디렉토리 내 보존됨.  
'trans_csv_to_srs' 설명 작성  
readme 관련 내용 수정 및 개정  
## ver 2.1
readme 파일 마크다운 문법에 맞게 가독성 개선  
## ver 3.0
github 프로젝트 내 위키로 사용법 이슈 트레커 이관 등의 readme 개정  
## ver 3.1
부족했던 부분 가필

# 개발자 모두발언
## ver 2.1? 2019/10/08
현재 기여자가 프로젝트 관리자인 저밖에 없는 관계로 생각보다 코드 갈아엎기나 모듈 분할 같은 일을 자주 만들고 있습니다. 따라서 만약. 마안약에 기여를 하시고자 할 때에는 되도록 브랜치를 따로 하셔야 나중에 통합할 때 편할 것 같습니다. 어차피 통합도 제가 하니 마음 편하게 가지시고 참여해주시면 감사하겠습니다.
